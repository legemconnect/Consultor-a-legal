<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Resolutor de Problemas Legales</title>
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        form { max-width: 600px; margin: auto; }
        label { display: block; margin-top: 10px; font-weight: bold; }
        input, textarea { width: 100%; padding: 8px; margin-top: 5px; box-sizing: border-box; }
        button { margin-top: 20px; padding: 10px 20px; background-color: #4CAF50; color: white; border: none; cursor: pointer; }
        button:hover { background-color: #45a049; }
        #response { margin-top: 20px; padding: 10px; border: 1px solid #ccc; background-color: #f9f9f9; }
        footer { margin-top: 20px; text-align: center; font-size: 0.9em; }
    </style>
</head>
<body>
    <header>
        <h1>Resolutor de Problemas Legales</h1>
    </header>
    <main>
        <p>Bienvenido al Resolutor de Problemas Legales. Por favor, complete el formulario a continuación para describir su problema legal. Le proporcionaremos orientación general y enviaremos su información a un profesional para un seguimiento posterior.</p>
        <form id="legal-form">
            <label for="name">Nombre:</label>
            <input type="text" id="name" name="name" required>
            <label for="email">Correo electrónico:</label>
            <input type="email" id="email" name="email" required>
            <label for="phone">Teléfono (10 dígitos):</label>
            <input type="tel" id="phone" name="phone" required pattern="[0-9]{10}">
            <label for="description">Breve descripción del problema legal:</label>
            <textarea id="description" name="description" required rows="5"></textarea>
            <label for="jurisdiction">Jurisdicción o ubicación (ej. ciudad, país):</label>
            <input type="text" id="jurisdiction" name="jurisdiction" required>
            <button type="submit">Enviar</button>
        </form>
        <div id="response" style="display: none;"></div>
    </main>
    <footer>
        <p><strong>Descargo de responsabilidad:</strong> La información proporcionada en este sitio web es solo para fines generales y no constituye asesoramiento legal. Siempre consulte con un abogado calificado para problemas legales específicos.</p>
        <p>Contacto: resolutorlegal@example.com</p>
    </footer>
    <script>
        emailjs.init('hz9CzCgK-LggHycqt'); // Tu user ID de EmailJS

        document.getElementById('legal-form').addEventListener('submit', function(event) {
            event.preventDefault();
            if (!validateForm()) {
                alert('Por favor, complete todos los campos correctamente.');
                return;
            }
            const response = generateResponse();
            displayResponse(response);
            sendEmail();
        });

        function validateForm() {
            const name = document.getElementById('name').value;
            const email = document.getElementById('email').value;
            const phone = document.getElementById('phone').value;
            const description = document.getElementById('description').value;
            const jurisdiction = document.getElementById('jurisdiction').value;
            return name && email && phone.match(/^[0-9]{10}$/) && description && jurisdiction;
        }

        function generateResponse() {
            return "Gracias por compartir su problema legal. Tenga en cuenta que este servicio proporciona orientación general y no sustituye el asesoramiento legal profesional. Le recomendamos consultar con un abogado calificado para su situación específica. Mientras tanto, puede encontrar útiles los siguientes recursos: <a href='http://www.internationallegalaidgroup.org/' target='_blank'>International Legal Aid Group</a>, <a href='https://www.lawyers.com/' target='_blank'>Lawyers.com</a>. Un profesional revisará su caso y se pondrá en contacto con usted pronto.";
        }

        function displayResponse(response) {
            const responseDiv = document.getElementById('response');
            responseDiv.innerHTML = response;
            responseDiv.style.display = 'block';
        }

        // ¡FUNCIÓN CORREGIDA!
        function sendEmail() {
            emailjs.send('LegemConnect', 'template_m5tlbo5', {
                name: document.getElementById('name').value,
                email: document.getElementById('email').value,
                phone: document.getElementById('phone').value,
                description: document.getElementById('description').value,
                jurisdiction: document.getElementById('jurisdiction').value,
                timestamp: new Date().toLocaleString('es-ES', { timeZone: 'Europe/Madrid' })
            }).then(function(response){
                console.log('Correo enviado exitosamente', response);
            }, function(error){
                console.error('Error al enviar el correo', error);
                alert('Hubo un problema al enviar su información. Intente de nuevo más tarde.');
            });
        }
    </script>
</body>
</html>
